(()=>{let L=document.getElementById("cal"),y=document.getElementById("dv"),E=new BurmeseCal;var e=new BcGcal;let t=new Date;function showMonthView(){y.style.setProperty("display","none"),L.style.setProperty("display","block")}let n=e.MONTH_SHORT,s=(e=numberRange(2e3,2100),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var a=document.createElement("div"),d=(a.classList.add("topdiv"),document.createElement("h3"));d.innerHTML="Burmese Calendar";let l=document.createElement("select"),r=(l.setAttribute("id","year"),e.map(e=>{var a=document.createElement("option");a.value=e,(a.innerHTML=e)===t.getFullYear()&&(a.selected=!0),l.appendChild(a)}),document.createElement("select")),i=(r.setAttribute("id","month"),n.map(e=>{var a=document.createElement("option");a.value=n.indexOf(e),a.innerHTML=e,n.indexOf(e)===t.getMonth()&&(a.selected=!0),r.appendChild(a)}),document.createElement("select"));i.setAttribute("id","langs");(e=document.createElement("option")).value="English",e.innerHTML="English",e.selected=!0;var c=document.createElement("option");c.value="Burmese",c.innerHTML="Burmese",i.appendChild(e),i.appendChild(c),(e=document.createElement("button")).innerHTML="&lt;",e.classList.add("tbtn"),e.setAttribute("title","Previous Month"),(c=document.createElement("button")).innerHTML="&gt;",c.classList.add("tbtn"),c.setAttribute("title","Next Month"),a.appendChild(d),a.appendChild(e),a.appendChild(l),a.appendChild(r),a.appendChild(i),a.appendChild(c),(d=document.createElement("div")).classList.add("calendar-body");let p=document.createElement("div"),g=(p.classList.add("wddiv"),s.map(e=>{var a=document.createElement("div");0!==s.indexOf(e)&&6!==s.indexOf(e)||a.classList.add("hd"),a.classList.add("wd"),a.innerHTML=e,p.appendChild(a)}),document.createElement("div")),C=(g.classList.add("daydiv"),document.createElement("div")),M=(C.classList.add("dayview"),document.createElement("button"));function getValues(){return{yr:Number.parseInt(l.value),mo:Number.parseInt(r.value)+1,lan:i.value}}function render(){g.innerHTML="";var e=E.monthView({year:getValues().yr,month:getValues().mo,lang:getValues().lan});let d=e.date_views;var a=d[0].weekday.index,t=e.month.days_in_month,{before:n,after:s}=blankCells(a,t);for(let e=0;e<n;e++){var l=document.createElement("div");l.classList.add("blank"),g.appendChild(l)}for(let e=0;e<t;e++){var r=document.createElement("div"),i=(r.classList.add("day"),document.createElement("div")),c=(i.classList.add("datediv"),document.createElement("span")),p=d[e].weekday.index,m=(0!==p&&6!==p&&!d[e].isHoliday||c.classList.add("hd"),d[e].isNow&&c.classList.add("today"),c.classList.add("datespan"),c.innerHTML=d[e].day.str,document.createElement("span")),p=(m.classList.add("wdspan"),0!==p&&6!==p||m.classList.add("hd"),m.innerHTML=d[e].weekday.short,document.createElement("span")),c=(p.classList.add("sbhspan"),p.innerHTML=d[e].burmese_cal.sabbath.str,i.appendChild(c),i.appendChild(p),i.appendChild(m),document.createElement("div")),p=(c.classList.add("bmdiv"),document.createElement("div")),m=(p.classList.add("bmdiv"),document.createElement("div")),o=(m.classList.add("bmdiv"),d[e].burmese_cal.moon_phase.index),u=d[e].burmese_cal.public_holiday.map(e=>`<span class="hd">${e}</span>`),h=d[e].burmese_cal.sabbath.school_holiday?"School Holiday":"";let s=1===o?"ðŸŸ¡":3===o?"ðŸŒ‘":d[e].burmese_cal.fortnight_day.str;var o=`
        <span class="bmspan">${d[e].burmese_cal.burmese_month.str}</span>
        <span class="bmspan">${d[e].burmese_cal.moon_phase.str}<span class="fmspan">${s}</span></span>
        `,v=`
        <span class="bmspan gre">${d[e].burmese_cal.yatyaza.str}</span>
        <span class="bmspan hd">${d[e].burmese_cal.pyathada.str}</span>
        `,u=`
        <span class="bmspan">${u}</span>
        <span class="bmspan hd">${h}</span>
        `;c.innerHTML=o,p.innerHTML=v,m.innerHTML=u,r.dataset.jdn=d[e].jdn,r.addEventListener("click",e=>{C.innerHTML="";var a=document.createElement("div");let t=e.currentTarget.dataset.jdn;var e=d.find(e=>e.jdn===Number(t)),n=e.burmese_cal;a.innerHTML=`
        <div class="dvtext">
            <span class="dvspan">JDN : ${e.jdn}</span>
            <span class="dvspan">${e.year.str}-${e.month.long}-${e.day.str}</span>
            <span class="dvspan">${n.burmese_month.str} ${n.moon_phase.str} ${s}</span>
            <span class="dvspan gre">${n.yatyaza.str}</span>
            <span class="dvspan hd">${n.pyathada.str}</span>
            <span class="dvspan gre">${n.sabbath.str}</span>
            <span class="dvspan">Mahabote: ${n.mahabote.str}</span>
            <span class="dvspan"> Drago Head: ${n.nagahle.str}</span>
            <span class="dvspan"> Nakhat: ${n.nakhat.str}</span>
            <span class="dvspan">Astro Days:</span>
            <span class="dvspan">${n.astro_days.join(" , ")}</span>
             <span class="dvspan">Holidays:</span>
            <span class="dvspan hd">${n.public_holiday.join(" , ")}</span>
          </div>
        `,C.appendChild(a),C.appendChild(M),function showDateView(){y.style.setProperty("display","block"),L.style.setProperty("display","none")}()}),r.appendChild(i),r.appendChild(c),r.appendChild(p),r.appendChild(m),g.appendChild(r)}for(let e=0;e<s;e++){var b=document.createElement("div");b.classList.add("blank"),g.appendChild(b)}showMonthView()}M.classList.add("backbtn"),M.innerHTML="Back",M.addEventListener("click",showMonthView),d.appendChild(p),d.appendChild(g),L.appendChild(a),L.appendChild(d),y.appendChild(C),render(),a.addEventListener("change",e=>{e.preventDefault(),render()}),e.addEventListener("click",function preMonth(){var e=Number.parseInt(r.value,10),a=Number.parseInt(l.value,10),a=11==(e=0===e?11:e-1)?a-1:a;r.value=e,l.value=a,render()}),c.addEventListener("click",function nextMonth(){var e=Number.parseInt(r.value,10),a=Number.parseInt(l.value,10),a=0===(e=11===e?0:e+1)?a+1:a;r.value=e,l.value=a,render()})})(),(()=>{let t=document.querySelector("html");var e=document.getElementById("themebtn"),a=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",a=localStorage.getItem("theme")||a;t.classList.add(a),localStorage.setItem("theme",a),e.addEventListener("click",()=>{var e=t.classList.contains("dark")?"dark":"light",a="dark"==e?"light":"dark";t.classList.replace(e,a),localStorage.setItem("theme",a)})})();